@if (isOpen()) {
  <div 
    class="panel-overlay" 
    (click)="onClose()"
    role="dialog"
    aria-modal="true"
    aria-labelledby="panel-title"
    aria-describedby="panel-description"
  >
    <div 
      class="panel-container" 
      #panelContainer
      (click)="$event.stopPropagation()"
      tabindex="-1"
    >
      <!-- Panel Header -->
      <div class="panel-header">
        <div class="header-content">
          <h2 id="panel-title" class="panel-title">Work Order Details</h2>
          <p id="panel-description" class="panel-description">Specify the dates, name and status for this order.</p>
        </div>
        <div class="header-actions">
          <app-nao-button type="secondary" (click)="onClose()" aria-label="Cancel and close form">Cancel</app-nao-button>
          <app-nao-button
            type="primary"
            [disabled]="form.invalid || isSubmitting()"
            (click)="onSubmit()"
            [attr.aria-label]="getButtonText() + ' work order'"
          >
            {{ getButtonText() }}
          </app-nao-button>
        </div>
      </div>

      <!-- Panel Body -->
      <div class="panel-body">
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
          <!-- Work Order Name -->
          <div class="form-field">
            <app-nao-input
              #firstInput
              label="Work Order Name"
              formControlName="name"
              [required]="true"
              [errorMessage]="getFieldError('name')"
              placeholder="Acme Inc."
              aria-label="Work Order Name"
            />
          </div>

          <!-- Status -->
          <div class="form-field">
            <app-nao-select
              variant="status"
              label="Status"
              [items]="statusOptions"
              formControlName="status"
              [required]="true"
              [errorMessage]="getFieldError('status')"
              placeholder="Select status"
            />
          </div>

          <!-- Start Date -->
          <div class="form-field">
            <app-nao-datepicker
              label="Start date"
              formControlName="startDate"
              [required]="true"
              [errorMessage]="getFieldError('startDate')"
            />
          </div>

          <!-- End Date -->
          <div class="form-field">
            <app-nao-datepicker
              label="End date"
              formControlName="endDate"
              [required]="true"
              [errorMessage]="getFieldError('endDate')"
            />
          </div>

          <!-- Form-level errors -->
          @if (getFormError()) {
            <div class="form-error">{{ getFormError() }}</div>
          }
        </form>
      </div>
    </div>
  </div>
}